# ============================================
# OpenCitiVibes Deployment Configuration
# ============================================
# Copy to .env and customize for your instance
# Usage: cp .env.example .env

# ============================================
# Instance Identity
# ============================================
# Used for Docker naming and deployments
COMPOSE_PROJECT_NAME=opencitivibes
CONTAINER_PREFIX=ocv
VOLUME_PREFIX=ocv
NETWORK_NAME=ocv-network

# For Montreal instance, use:
# COMPOSE_PROJECT_NAME=idees-montreal
# CONTAINER_PREFIX=idees-mtl
# VOLUME_PREFIX=idees-mtl
# NETWORK_NAME=idees-mtl-network

# ============================================
# Docker Registry & Images
# ============================================
REGISTRY=ghcr.io
IMAGE_REPOSITORY=your-org/opencitivibes
IMAGE_TAG=latest

# GitHub repository for CI/CD
GITHUB_REPOSITORY=your-org/opencitivibes

# ============================================
# URLs & Domains
# ============================================
# Production domain
DOMAIN=your-domain.com
NEXT_PUBLIC_SITE_URL=https://your-domain.com
NEXT_PUBLIC_API_URL=https://your-domain.com/api

# Instance display name (shown in UI)
NEXT_PUBLIC_INSTANCE_NAME=Your Platform Name

# CORS (JSON array format)
CORS_ORIGINS=["https://your-domain.com"]

# ============================================
# Backend Configuration
# ============================================
# REQUIRED: Secret key for JWT tokens
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-here-generate-with-openssl-rand-hex-32

# OPTIONAL: Encryption key for 2FA TOTP secrets
# Required if you want to enable two-factor authentication
# Generate with: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOTP_ENCRYPTION_KEY=

# Database URL (SQLite for dev, PostgreSQL for prod)
DATABASE_URL=sqlite:///./data/opencitivibes.db
# For PostgreSQL:
# DATABASE_URL=postgresql://opencitivibes:password@postgres:5432/opencitivibes

# Platform configuration file
PLATFORM_CONFIG_PATH=./config/platform.config.json

# JWT Configuration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Logging
LOG_LEVEL=INFO
ENVIRONMENT=production

# ============================================
# Admin Configuration
# ============================================
ADMIN_EMAIL=admin@your-domain.com
ADMIN_PASSWORD=ChangeMe!2024

# ============================================
# Frontend Configuration
# ============================================
NEXT_PUBLIC_DEFAULT_LOCALE=en
NEXT_PUBLIC_ENVIRONMENT=production

# ============================================
# PostgreSQL (Optional - use with --profile postgres)
# ============================================
POSTGRES_USER=opencitivibes
POSTGRES_PASSWORD=secure-password-here
POSTGRES_DB=opencitivibes

# ============================================
# SSL/TLS (for Let's Encrypt)
# ============================================
SSL_EMAIL=admin@your-domain.com

# ============================================
# Monitoring (Optional)
# ============================================
SENTRY_DSN=
NEXT_PUBLIC_SENTRY_DSN=

# ============================================
# Ntfy Push Notifications
# ============================================
# Public URL for ntfy (subdomain) - for admin mobile apps
NTFY_BASE_URL=https://ntfy.your-domain.com

# Internal URL for backend to publish (Docker network)
NTFY_INTERNAL_URL=http://ntfy:80

# Topic prefix for this instance (e.g., "idees-admin" for Montreal)
NTFY_TOPIC_PREFIX=admin

# Cache duration for notifications
NTFY_CACHE_DURATION=24h

# Auth token for backend to publish (generate with: ./scripts/setup-ntfy-auth.sh)
# Leave empty if running without auth (not recommended for production)
NTFY_AUTH_TOKEN=

# Enable/disable notifications globally
NTFY_ENABLED=true

# Frontend URL for notification deep links (click actions)
APP_URL=https://your-domain.com
