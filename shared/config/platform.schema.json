{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OpenCitiVibes Platform Configuration",
  "type": "object",
  "required": ["platform", "instance", "contact", "localization"],
  "properties": {
    "platform": {
      "type": "object",
      "properties": {
        "name": { "type": "string", "default": "OpenCitiVibes" },
        "version": { "type": "string" }
      }
    },
    "instance": {
      "type": "object",
      "required": ["name", "entity"],
      "properties": {
        "name": { "$ref": "#/definitions/localizedString" },
        "entity": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["city", "region", "country", "organization", "community"]
            },
            "name": { "$ref": "#/definitions/localizedString" },
            "region": { "$ref": "#/definitions/localizedString" },
            "country": { "$ref": "#/definitions/localizedString" }
          }
        },
        "location": {
          "type": "object",
          "properties": {
            "display": { "$ref": "#/definitions/localizedString" },
            "coordinates": {
              "type": "object",
              "properties": {
                "lat": { "type": "number" },
                "lng": { "type": "number" }
              }
            },
            "timezone": { "type": "string" }
          }
        }
      }
    },
    "contact": {
      "type": "object",
      "required": ["email"],
      "properties": {
        "email": { "type": "string", "format": "email" },
        "support_email": { "type": "string", "format": "email" },
        "address": { "$ref": "#/definitions/localizedString" }
      }
    },
    "social": {
      "type": "object",
      "properties": {
        "twitter": { "type": "string" },
        "facebook": { "type": "string" },
        "instagram": { "type": "string" },
        "linkedin": { "type": "string" }
      }
    },
    "legal": {
      "type": "object",
      "properties": {
        "jurisdiction": { "$ref": "#/definitions/localizedString" },
        "courts": { "$ref": "#/definitions/localizedString" },
        "privacy_authority": {
          "type": "object",
          "properties": {
            "name": { "$ref": "#/definitions/localizedString" },
            "acronym": { "type": "string" },
            "url": { "type": "string", "format": "uri" }
          }
        },
        "data_protection_laws": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "description": { "$ref": "#/definitions/localizedString" }
            }
          }
        }
      }
    },
    "branding": {
      "type": "object",
      "properties": {
        "primary_color": { "type": "string", "pattern": "^#[0-9A-Fa-f]{6}$" },
        "secondary_color": { "type": "string", "pattern": "^#[0-9A-Fa-f]{6}$" },
        "hero_image": { "type": "string" },
        "logo": { "type": "string" }
      }
    },
    "features": {
      "type": "object",
      "additionalProperties": { "type": "boolean" }
    },
    "localization": {
      "type": "object",
      "required": ["default_locale", "supported_locales"],
      "properties": {
        "default_locale": { "type": "string" },
        "supported_locales": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1
        },
        "date_format": { "$ref": "#/definitions/localizedString" }
      }
    }
  },
  "definitions": {
    "localizedString": {
      "type": "object",
      "additionalProperties": { "type": "string" }
    }
  }
}
